(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2378e5"],{fc2d:function(t,e,a){"use strict";a.r(e);var s=a("c6a6"),n=a("8336"),o=a("b0af"),r=a("99d9"),i=a("2e4b"),l=a("169a"),c=a("ce7e"),d=a("0e8f"),u=a("132d"),f=a("adda"),p=a("a722"),g=a("e449"),m=a("891e"),h=a("1d4d"),x=a("2db4"),k=a("2fa4"),v=a("8654"),w=a("a844"),b=function(){var t=this,e=t._self._c;return e("div",[e(p["a"],{attrs:{wrap:"","fill-height":""}},[e(d["a"],{attrs:{xs12:""}},[e("PageLoader",{attrs:{storage:t.appLoading}}),t.ServerError?e("ServerError"):t._e(),e(x["a"],{attrs:{color:"#ff6200",right:"",timeout:3e3},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[e(p["a"],{attrs:{wrap:""}},[e(d["a"],{staticClass:"align-self-center",attrs:{"text-left":""}},[t._v(t._s(t.msg))]),e(d["a"],{attrs:{"text-right":""}},[e(n["a"],{attrs:{small:"",ripple:!1,text:""},on:{click:function(e){t.snackbar=!1}}},[e(u["a"],{staticStyle:{color:"white"}},[t._v("mdi-close")])],1)],1)],1)],1),e(p["a"],{attrs:{wrap:"","justify-center":""}},[e(d["a"],{attrs:{xs12:"","pb-1":"","pt-3":"","pt-md-lg-xl-0":""}},[e("span",{staticClass:"LexendRegular",staticStyle:{"font-weight":"bold","text-transform":"none"}},[t._v(" Shikara Booking List ")])]),e(d["a"],{attrs:{xs12:""}},[e(p["a"],{attrs:{wrap:"","justify-start":"","pt-2":""}},[e(d["a"],{attrs:{"pt-2":"","pl-lg-0":"","pl-2":"",xs12:"",sm4:"",lg2:""}},[e(g["a"],{ref:"HmenuCheckInVisible",attrs:{"close-on-content-click":!1,"return-value":t.fromdate,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){t.fromdate=e},"update:return-value":function(e){t.fromdate=e}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(v["a"],t._g(t._b({staticClass:"LexendRegular rounded-0",staticStyle:{"text-transform":"none"},attrs:{outlined:"",readonly:"",label:" From Date",color:"orange",dense:"","hide-details":"auto",clearable:""},model:{value:t.fromdate,callback:function(e){t.fromdate=e},expression:"fromdate"}},"v-text-field",s,!1),a))]}}]),model:{value:t.HmenuCheckInVisible,callback:function(e){t.HmenuCheckInVisible=e},expression:"HmenuCheckInVisible"}},[e(i["a"],{attrs:{"no-title":"",color:"orange",scrollable:""},on:{change:function(e){return t.$refs.HmenuCheckInVisible.save(t.fromdate)}},model:{value:t.fromdate,callback:function(e){t.fromdate=e},expression:"fromdate"}},[e(k["a"])],1)],1)],1),e(d["a"],{attrs:{"pl-2":"","pt-2":"",xs12:"",sm4:"",lg2:""}},[e(g["a"],{ref:"HmenuCheckOutVisible",attrs:{"close-on-content-click":!1,"return-value":t.todate,transition:"scale-transition"},on:{"update:returnValue":function(e){t.todate=e},"update:return-value":function(e){t.todate=e}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(v["a"],t._g(t._b({staticClass:"rounded-0 LexendRegular",staticStyle:{"text-transform":"none"},attrs:{outlined:"",readonly:"",label:" To Date",color:"orange",dense:"","hide-details":"auto",clearable:""},model:{value:t.todate,callback:function(e){t.todate=e},expression:"todate"}},"v-text-field",s,!1),a))]}}]),model:{value:t.HmenuCheckOutVisible,callback:function(e){t.HmenuCheckOutVisible=e},expression:"HmenuCheckOutVisible"}},[e(i["a"],{attrs:{"no-title":"",color:"orange",min:t.fromdate},on:{change:function(e){return t.$refs.HmenuCheckOutVisible.save(t.todate)}},model:{value:t.todate,callback:function(e){t.todate=e},expression:"todate"}},[e(k["a"])],1)],1)],1),e(d["a"],{attrs:{"pl-2":"","pt-2":"",xs12:"",sm4:"",lg2:""}},[e(s["a"],{staticClass:"LexendRegular",staticStyle:{"border-radius":"0px","border-color":"#626262","text-transform":"none"},attrs:{outlined:"",dense:"",color:"orange",items:t.statuslist,label:"Status","item-text":"name","item-value":"_id","item-color":"#FF1313","hide-details":"true"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1)],1)],1)],1),t.list.length>0?e(p["a"],{attrs:{wrap:"","justify-center":""}},[e(d["a"],{attrs:{xs12:""}},[e(p["a"],{attrs:{wrap:"","justify-center":""}},[e(d["a"],{attrs:{xs12:"","pt-8":""}},[e(o["a"],{attrs:{elevation:"0"}},[e(p["a"],{attrs:{wrap:"","justify-center":"","pb-6":""}},t._l(t.list,(function(a,s){return e(d["a"],{key:s,attrs:{xs11:"","pt-5":""}},[e(o["a"],{staticStyle:{"border-radius":"12px"},attrs:{elevation:"0",color:"#EDEDED"}},[e(p["a"],{attrs:{wrap:"","justify-center":""}},[e(d["a"],{staticClass:"hidden-sm-and-down",attrs:{xs12:"",lg3:""}},[a?e(p["a"],{attrs:{wrap:"","justify-start":""}},[a.shikaraid?e(d["a"],{attrs:{xs12:""}},[a.shikaraid.coverImage?e(d["a"],[e(f["a"],{staticClass:"customcard2",staticStyle:{"border-radius":"12px 0px 0px 12px"},attrs:{height:"170px",width:"100%",src:t.mediaUURL+a.shikaraid.coverImage},scopedSlots:t._u([{key:"placeholder",fn:function(){return[e("ImageLoader")]},proxy:!0}],null,!0)},["Success"===a.advancepaymentStatus&&"Active"==a.status?e(p["a"],{attrs:{wrap:"","fill-height":"","justify-center":""}},[e(d["a"],{attrs:{"pb-2":"","pl-4":"","pr-4":"","align-self-end":""}},[e(n["a"],{attrs:{block:"",color:"#F17343"},on:{click:function(e){return t.downloadTicket(a._id)}}},[e("span",{staticStyle:{"font-family":"LexendRegular",color:"white","font-size":"11px"}},[t._v(" Download Ticket ")]),e(u["a"],{attrs:{color:"white"}},[t._v("mdi-download")])],1)],1)],1):t._e()],1)],1):t._e()],1):t._e()],1):t._e()],1),e(d["a"],{staticClass:"hidden-md-and-up",attrs:{xs12:"",lg3:""}},[a?e(p["a"],{attrs:{wrap:"","justify-start":""}},[a.shikaraid?e(d["a"],{attrs:{xs12:""}},[a.shikaraid.coverImage?e(d["a"],[e(f["a"],{staticClass:"customcard2",attrs:{height:"170px",width:"100%",src:t.mediaUURL+a.shikaraid.coverImage}},["Success"===a.advancepaymentStatus&&"Active"==a.status?e(p["a"],{attrs:{wrap:"","fill-height":"","justify-center":""}},[e(d["a"],{attrs:{"pb-2":"","pl-4":"","pr-4":"","align-self-end":""}},[e(n["a"],{attrs:{block:"",color:"#F17343"},on:{click:function(e){return t.downloadTicket(a._id)}}},[e("span",{staticStyle:{"font-family":"LexendRegular",color:"white","font-size":"11px"}},[t._v(" Download Ticket ")]),e(u["a"],{attrs:{color:"white"}},[t._v("mdi-download")])],1)],1)],1):t._e()],1)],1):t._e()],1):t._e()],1):t._e()],1),e(d["a"],{attrs:{xs12:"",lg9:"","pl-6":""}},[e(p["a"],{attrs:{wrap:"","justify-start":"","fill-height":""}},[e(d["a"],{attrs:{xs12:"",sm4:"",md4:"",lg4:"","pt-3":"","text-left":"","align-self-center":""}},[e(p["a"],{attrs:{wrap:""}},[e(d["a"],{attrs:{xs12:""}},[e("span",{staticStyle:{"font-weight":"bold","font-size":"20px","font-family":"LexendRegular"}},[t._v(" "+t._s(a.shikaraid.shikaraName)+" ")])]),e(d["a"],{attrs:{xs12:"","pt-3":""}},[e("span",{staticStyle:{"font-family":"LexendRegular","font-size":"14px","font-weight":"500"}},[t._v(" Booking # : ")]),e("span",{staticStyle:{color:"#f17343","font-size":"15px"}},[t._v("   "+t._s(a.bookingNo)+" ")])]),e(d["a"],{attrs:{"pt-3":""}},[e("span",{staticStyle:{"font-family":"LexendRegular","font-size":"15px","font-weight":"500"}},[t._v(" Timings :  "),e("span",{staticStyle:{color:"#f17343"}},[t._v(" "+t._s(t.formattedDate(a.selectedDate))),e("br"),t._v(" "+t._s(t.formatTimeNew(a.startTime))+" - "+t._s(t.formatTimeNew(a.endTime))+" ")])])]),a?e(d["a"],{attrs:{xs12:"","pr-2":""}},[a.shikaraid&&a.shikaraid.rating?e(h["a"],{attrs:{length:5,size:18,"active-color":"#ff6200",color:"#ff6200","background-color":"#ff6200"},model:{value:a.shikaraid.rating,callback:function(e){t.$set(a.shikaraid,"rating",e)},expression:"item.shikaraid.rating"}}):t._e()],1):t._e()],1)],1),a?e(d["a"],{attrs:{"pl-4":"",xs12:"",sm4:"",md4:"",lg4:"","text-left":"","align-self-center":""}},[a.customerDetails?e(p["a"],{attrs:{wrap:""}},[e(d["a"],{attrs:{xs12:"","pt-3":""}},[e("span",{staticStyle:{"font-weight":"400","font-size":"14px","font-family":"LexendRegular"}},[t._v(" Booked for :   ")]),a.customerDetails?e("span",{staticStyle:{color:"#f17343","font-family":"LexendRegular","font-size":"15px"}},[t._v(" "+t._s(a.customerDetails.name)+", "+t._s(a.customerDetails.phoneNumber)+" ")]):t._e()]),e(d["a"],{attrs:{xs12:"","text-left":"","pt-4":""}},[e("span",{staticStyle:{"font-family":"LexendRegular","font-size":"14px","font-weight":"500"}},[t._v(" Advance :  "),e("span",{staticStyle:{color:"#f17343"}},[t._v(" ₹ "+t._s(a.advance)+" ")])])]),e(d["a"],{attrs:{xs12:"","text-left":"","pt-3":""}},[e("span",{staticStyle:{"font-family":"LexendRegular","font-size":"14px","font-weight":"500"}},[t._v(" Balance :  "),"Pending"==a.balancepaymentStatus&&"Agent"==a.advancepaymentMode?e("span",{staticStyle:{color:"red"}},[t._v(" ₹ "+t._s(a.postBookingamount)+" Not Paid ")]):"Success"==a.balancepaymentStatus&&"Agent"==a.advancepaymentMode?e("span",{staticStyle:{color:"green"}},[t._v(" ₹ "+t._s(a.postBookingamount)+" Paid ")]):e("span",{staticStyle:{color:"green"}},[t._v(" ₹ "+t._s(a.postBookingamount)+" ")])])])],1):t._e()],1):t._e(),e(d["a"],{attrs:{xs12:"",sm4:"",md4:"",lg4:"","align-self-center":""}},[e(p["a"],{attrs:{wrap:"","justify-end":""}},[e(d["a"],{staticClass:"hidden-sm-and-down",attrs:{xs12:"","text-center":"","pl-3":"","pr-1":"","pb-2":""}},[e("span",{staticStyle:{"font-family":"LexendRegular",color:"black","font-size":"20px","font-weight":"600"}},[t._v(" ₹ "+t._s(a.bookingTotal)+" ")])]),e(d["a"],{staticClass:"hidden-md-and-up",attrs:{xs12:"","text-left":"","pt-2":""}},[e("span",{staticStyle:{"font-family":"LexendRegular",color:"black","font-size":"20px","font-weight":"600"}},[t._v(" ₹ "+t._s(a.bookingTotal)+" ")])]),e(d["a"],{staticClass:"hidden-sm-and-down",attrs:{xs12:"","text-center":"","pl-3":"","pr-10":"","pl-10":"","pb-3":""}},[e(n["a"],{attrs:{block:"",color:"#F17343"},on:{click:function(e){return t.gotoView(a._id)}}},[e("span",{staticStyle:{"font-family":"LexendRegular",color:"white","font-size":"14px","font-weight":"400","text-transform":"none"}},[t._v(" View Details ")])])],1),e(d["a"],{staticClass:"hidden-md-and-up",attrs:{xs12:"","text-center":"","pr-3":"","pt-2":"","pb-3":""}},[e(n["a"],{attrs:{block:"",color:"#F17343"},on:{click:function(e){return t.gotoView(a._id)}}},[e("span",{staticStyle:{"font-family":"LexendRegular",color:"white","font-size":"14px","font-weight":"400","text-transform":"none"}},[t._v(" View Details ")])])],1),"Cancelled"!==a.status?e(d["a"],{staticClass:"hidden-sm-and-down",attrs:{xs12:"","text-center":"","pl-3":"","pr-10":"","pl-10":"","pb-3":""}},[t.isCancelButtonVisible(a.selectedDate)&&"Active"==a.status?e(n["a"],{attrs:{block:"",color:"#F17343"},on:{click:function(e){t.bookid=a._id,t.canceldialog=!0}}},[e("span",{staticStyle:{"font-family":"LexendRegular",color:"white","font-size":"14px","font-weight":"400","text-transform":"none"}},[t._v(" Cancel ")])]):t._e()],1):t._e(),"Cancelled"!==a.status?e(d["a"],{staticClass:"hidden-md-and-up",attrs:{xs12:"","pr-3":"","pb-4":"","text-center":""}},[t.isCancelButtonVisible(a.selectedDate)&&"Active"==a.status?e(n["a"],{attrs:{block:"",color:"#F17343"},on:{click:function(e){t.bookid=a._id,t.canceldialog=!0}}},[e("span",{staticStyle:{"font-family":"LexendRegular",color:"white","font-size":"14px","font-weight":"400","text-transform":"none"}},[t._v(" Cancel ")])]):t._e()],1):t._e(),t.isEndDateOver(a.selectedDate)?e(d["a"],{attrs:{"pb-3":"",xs12:"","pr-2":"",lg10:"","pr-lg-10":"","text-center":""}},[e(n["a"],{attrs:{block:"",color:"#F17343"},on:{click:function(e){t.bookid2=a.shikaraid._id,t.reviewDialog=!0}}},[e("span",{staticStyle:{"font-family":"LexendRegular",color:"white","font-size":"14px","font-weight":"400","text-transform":"none"}},[t._v(" Add Review ")])])],1):t._e()],1)],1)],1)],1)],1)],1)],1)})),1)],1)],1)],1)],1)],1):e(p["a"],{attrs:{wrap:"","text-center":""}},[e(d["a"],{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:"","pt-16":""}},[e("span",{staticStyle:{"font-weight":"400","font-size":"20px","font-family":"LexendRegular","text-align":"center"}},[t._v(" No bookings found ")])])],1),t.list.length>0?e(p["a"],{attrs:{wrap:"","justify-center":""}},[e(d["a"],{attrs:{xs11:"","pt-4":"","pb-3":""}},[e(p["a"],{attrs:{wrap:""}},[e(d["a"],{attrs:{xs12:"",id:"specific-section"}},[e(m["a"],{attrs:{rounded:"circle","prev-icon":"mdi-menu-left","next-icon":"mdi-menu-right",length:t.pages,"total-visible":7,color:"#F17343"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)],1)],1):t._e()],1),e(l["a"],{attrs:{"retain-focus":!0,persistent:"","max-width":"600px"},model:{value:t.canceldialog,callback:function(e){t.canceldialog=e},expression:"canceldialog"}},[e(o["a"],[e(p["a"],{attrs:{wrap:""}},[e(d["a"],{attrs:{xs12:""}},[e(r["c"],{staticClass:"LexendRegular",staticStyle:{color:"black","font-size":"18px","font-weight":"lighter","text-transform":"none"}},[t._v(" Are you sure you want to cancel the booking? ")])],1)],1),e(r["a"],[e(k["a"]),e(n["a"],{staticClass:"LexendRegular",staticStyle:{"text-transform":"none"},attrs:{color:"black",text:""},on:{click:function(e){t.canceldialog=!1}}},[t._v("Cancel")]),e(n["a"],{staticClass:"LexendRegular",staticStyle:{"text-transform":"none"},attrs:{color:"red",text:""},on:{click:function(e){return t.cancelBooking(t.bookid)}}},[t._v("OK")]),e(k["a"])],1)],1)],1),e(l["a"],{attrs:{width:"400px"},model:{value:t.reviewDialog,callback:function(e){t.reviewDialog=e},expression:"reviewDialog"}},[e(o["a"],{staticClass:"pa-2",attrs:{width:"400px"}},[e(p["a"],{attrs:{wrap:"","justify-center":""}},[e(d["a"],{attrs:{xs11:"","text-center":""}},[e("span",{staticStyle:{color:"#ff6200","font-size":"23px","font-weight":"400","font-family":"LexendRegular"}},[t._v("Review")])]),e(d["a"],{attrs:{xs1:"","text-right":""}},[e(u["a"],{attrs:{color:"#ff6200"},on:{click:function(e){t.reviewDialog=!1}}},[t._v("mdi-close-box")])],1),e(d["a"],{attrs:{xs8:"","text-center":"","py-4":""}},[e(c["a"])],1)],1),e(p["a"],{attrs:{wrap:"","px-4":""}},[e(d["a"],{attrs:{xs12:"","py-1":"","pr-2":""}},[e(p["a"],{attrs:{wrap:""}},[e(d["a"],{attrs:{xs12:"","pr-2":""}},[e(h["a"],{attrs:{length:5,size:42,"active-color":"#ff6200",color:"#ff6200","background-color":"#ff6200"},model:{value:t.currentReview.rating,callback:function(e){t.$set(t.currentReview,"rating",e)},expression:"currentReview.rating"}})],1)],1)],1),e(d["a"],{attrs:{xs12:"","py-1":"","pr-2":""}},[e(p["a"],{attrs:{wrap:""}},[e(d["a"],{staticStyle:{"font-weight":"300","font-size":"16px","font-family":"LexendRegular"},attrs:{xs12:"","text-left":"","pr-2":""}},[e("span",[t._v("Comments")])]),e(d["a"],{attrs:{xs12:"","pr-2":""}},[e(w["a"],{attrs:{outlined:"",color:"ff6200",rules:t.rules,type:"text",dense:"","hide-details":"auto"},model:{value:t.currentReview.comment,callback:function(e){t.$set(t.currentReview,"comment",e)},expression:"currentReview.comment"}})],1)],1)],1)],1),e(r["a"],{staticClass:"pt-3"},[e(p["a"],{attrs:{wrap:""}},[e(k["a"]),e(d["a"],{attrs:{xs2:"","mx-4":""}},[e(n["a"],{staticClass:"buttons1",attrs:{color:"#ff6200",dark:"",block:""},on:{click:function(e){return t.addReview(t.bookid2)}}},[t._v("Save")])],1)],1)],1)],1)],1)],1)],1)},y=[],_=(a("14d9"),a("88a7"),a("271a"),a("5494"),a("cee4")),S={data(){return{status:"",reviewDialog:!1,bookid2:"",appLoading:!1,ServerError:!1,snackbar:!1,canceldialog:!1,list:[],statuslist:["Active","Inactive","Cancelled"],timeout:5e3,msg:null,pages:0,bookid:"",fromdate:"",todaysDate:new Date,currentReview:{comment:"",rating:0},rules:[t=>t.length<=200||"Max 200 characters"],todate:"",HmenuCheckInVisible:!1,HmenuCheckOutVisible:!1,value:"",phone:"",currentPage:1}},watch:{currentPage(){this.getList()},fromdate(){this.getList()},todate(){this.getList()},status(){this.getList()}},mounted(){this.getList()},methods:{isEndDateOver(t){const e=new Date,a=new Date(t);return a.setDate(a.getDate()+1),a<=e},addReview(t){this.appLoading=!0,Object(_["a"])({headers:{token:localStorage.getItem("token")},method:"post",url:"/review/add/shikara",data:{shikaraId:t,comment:this.currentReview.comment,rating:this.currentReview.rating}}).then(t=>{this.appLoading=!1,t.data.status?(this.reviewDialog=!1,this.msg=t.data.msg,this.showsnackbar=!0,location.reload()):(this.msg=t.data.msg,this.showsnackbar=!0)}).catch(t=>{this.appLoading=!1,console.log(t),this.ServerError=!0})},cancelBooking(t){Object(_["a"])({method:"GET",url:"shikara/booking/cancel",headers:{token:localStorage.getItem("token")},params:{bookingId:t}}).then(t=>{this.msg=t.data.msg,this.snackbar=!0,this.canceldialog=!1,location.reload()}).catch(t=>{this.ServerError=!0,console.log(t)})},formattedDate(t){const e={day:"2-digit",month:"2-digit",year:"numeric"};return new Date(t).toLocaleDateString("en-GB",e)},gotoView(t){this.$router.push({name:"bookingsdetailed",query:{id:t}})},downloadTicket(t){const e=localStorage.getItem("token"),a="/invoice/shikara/agent",s={headers:{Authorization:"Bearer "+e},params:{id:t},responseType:"blob"};_["a"].get(a,s).then(t=>{const e=window.URL.createObjectURL(new Blob([t.data])),a=document.createElement("a");a.href=e,a.setAttribute("download","Shikara ticket.pdf"),document.body.appendChild(a),a.click(),document.body.removeChild(a)}).catch(t=>{console.error("Error downloading invoice:",t)})},getList(){this.appLoading=!0,Object(_["a"])({method:"POST",url:"/my/allBookings",headers:{token:localStorage.getItem("token")},data:{page:this.currentPage,limit:10,type:"shikara",fromDate:this.fromdate,toDate:this.todate,status:this.status,location:this.location,memberCount:this.memberCount,childrenCount:this.childrenCount}}).then(t=>{t.data.status?(this.list=t.data.data,this.totalData=t.data.totalLength,this.pages=Math.ceil(this.totalData/t.data.limit),console.log(this.totalData),this.appLoading=!1):(this.appLoading=!1,this.msg=t.data.msg,this.snackbar=!0)})},detailedView(){this.$router.push("/bookingsdetailed")},formatTime(t){if(!t)return"";const e=t.slice(11,16);return e},formatTimeNew(t){var e=new Date(t),a=e.getHours(),s=e.getMinutes();e=e.toString();var n=a>=12?"pm":"am";a%=12,a=a||12,s=s<10?"0"+s:s;var o=a+":"+s+" "+n;return o},isCancelButtonVisible(t){const e=this.calculateBackDate(t);return e>=this.todaysDate},calculateBackDate(t){const e=new Date(t),a=new Date(e);return a.setDate(e.getDate()-8),a}}},C=S,D=a("2877"),L=Object(D["a"])(C,b,y,!1,null,null,null);e["default"]=L.exports}}]);
//# sourceMappingURL=chunk-2d2378e5.c8d46fe6.js.map