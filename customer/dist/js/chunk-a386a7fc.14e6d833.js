(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a386a7fc"],{"1d71":function(t,e,a){"use strict";a("1f08")},"1f08":function(t,e,a){},9617:function(t,e,a){"use strict";a.r(e);var s=a("8336"),n=a("b0af"),r=a("2e4b"),o=a("ce7e"),i=a("0e8f"),l=a("132d"),c=a("a722"),d=a("2db4"),h=a("2fa4"),p=function(){var t=this,e=t._self._c;return e("div",[e("vue-element-loading",{attrs:{active:t.appLoading,"is-full-screen":!0,"background-color":"#FFFFFF",color:"#ff6200",spinner:"spinner"}}),t.ServerError?e("ServerError"):t._e(),e(d["a"],{attrs:{color:"rgba(255, 98, 0, 1)",right:"",top:"",timeout:"2000"},model:{value:t.showSnackbar,callback:function(e){t.showSnackbar=e},expression:"showSnackbar"}},[e(c["a"],{staticClass:"LexendRegular",attrs:{wrap:"","justify-center":""}},[e(i["a"],{staticClass:"align-self-center",attrs:{"text-left":""}},[e("span",{staticStyle:{color:"white"}},[t._v(" "+t._s(t.msg)+" ")])]),e(i["a"],{attrs:{"text-right":""}},[e(s["a"],{attrs:{small:"",ripple:!1,text:""},on:{click:function(e){t.showSnackbar=!1}}},[e(l["a"],{staticStyle:{color:"white"}},[t._v("mdi-close")])],1)],1)],1)],1),e(c["a"],{attrs:{wrap:"","justify-center":"","pa-4":""}},[e(i["a"],{attrs:{xs12:""}},[e(c["a"],{attrs:{wrap:"","justify-start":""}},[e(i["a"],{attrs:{xs12:"",sm6:"","pb-2":"","align-self-center":""}},[e("span",{staticClass:"LexendRegular",style:{"font-size":"xs"==t.$vuetify.breakpoint.name||"sm"==t.$vuetify.breakpoint.name?"20px":"md"==t.$vuetify.breakpoint.name||"lg"==t.$vuetify.breakpoint.name?"25px":"30px"}},[t._v("Reschedule Booking")])]),e(i["a"],{attrs:{xs12:"",sm6:"","align-self-center":"","text-left":"","text-sm-right":""}},[e("span",{staticClass:"LexendRegular",style:{"font-size":"xs"==t.$vuetify.breakpoint.name||"sm"==t.$vuetify.breakpoint.name?"20px":"md"==t.$vuetify.breakpoint.name||"lg"==t.$vuetify.breakpoint.name?"25px":"30px"}},[t._v(t._s(t.$route.query.name))])])],1),e(c["a"],{attrs:{wrap:"","justify-space-around":""}},[e(i["a"],{attrs:{xs12:""}},[e(n["a"],{staticClass:"pa-0 pa-sm-4 pa-md-8",attrs:{tile:""}},[e(c["a"],{attrs:{wrap:""}},[e(i["a"],{staticClass:"hidden-xs-only",attrs:{xs12:"",sm7:""}},[e(n["a"],{attrs:{elevation:"0",height:"500px",width:"600px",color:"red",tile:""}},[e(r["a"],{ref:"datepicker",staticClass:"custofont LexendRegular",class:{"custom-date-picker":!0},staticStyle:{height:"500px","line-height":"60px","font-size":"28px"},attrs:{color:"rgba(255, 98, 0, 1)","no-title":"","picker-date":t.pickerDate,theme:"custom-theme",range:"","allowed-dates":t.filterAllowedDates,min:t.nowDate,"full-width":""},on:{"update:pickerDate":function(e){t.pickerDate=e},"update:picker-date":function(e){t.pickerDate=e}},model:{value:t.selectedDate,callback:function(e){t.selectedDate=e},expression:"selectedDate"}},[e(h["a"])],1)],1)],1),e(i["a"],{staticClass:"hidden-sm-and-up",attrs:{xs12:"",sm7:""}},[e(n["a"],{attrs:{elevation:"0",height:"400px",width:"600px",color:"red",tile:""}},[e(r["a"],{ref:"datepicker",staticClass:"custofont LexendRegular",class:{"custom-date-picker":!0},staticStyle:{height:"400px","line-height":"40px","font-size":"28px"},attrs:{color:"rgba(255, 98, 0, 1)","no-title":"","picker-date":t.pickerDate,theme:"custom-theme",range:"","allowed-dates":t.filterAllowedDates,min:t.nowDate,"full-width":""},on:{"update:pickerDate":function(e){t.pickerDate=e},"update:picker-date":function(e){t.pickerDate=e}},model:{value:t.selectedDate,callback:function(e){t.selectedDate=e},expression:"selectedDate"}},[e(h["a"])],1)],1)],1),e(i["a"],{attrs:{xs12:"",sm5:"","pl-0":"","pl-sm-8":""}},[e(n["a"],{staticClass:"pa-4 styl",attrs:{elevation:"0",color:"rgba(247, 247, 247, 1)"}},[e(c["a"],{attrs:{wrap:""}},[e(i["a"],{attrs:{xs12:""}},[e("span",{staticStyle:{"font-weight":"500","font-size":"20px","font-family":"LexendRegular","text-transform":"none"}},[t._v("BOOKING SUMMARY")])]),e(i["a"],{attrs:{xs12:"","pt-1":""}},[e("span",{staticStyle:{"font-weight":"400","font-size":"18px","font-family":"LexendRegular","text-transform":"none",color:"rgba(120, 119, 119, 1)"}},[t._v("SELECTED DATE")])]),t.finalarr?e(i["a"],{attrs:{xs12:"","pt-1":""}},t._l(t.finalarr,(function(a,s){return e("span",{key:s,staticStyle:{"font-weight":"500","font-size":"18px",color:"rgba(255, 98, 0, 1)","font-family":"LexendRegular","text-transform":"none"}},[t._v(t._s(a)+" "),s<Object.keys(t.finalarr).length-1?e("span",[t._v(", ")]):t._e()])})),0):t._e(),e(i["a"],{attrs:{xs12:"","pt-3":"","text-left":""}},[e("span",{staticClass:"font8"},[t._v("Booking ID : ")]),e("span",{staticClass:"fon8a"},[t._v(t._s(t.reservationData.bookingNo))])]),e(i["a"],{attrs:{xs12:"","pt-3":"","text-left":""}},[e("span",{staticClass:"font8"},[t._v("Trip Type : ")]),e("span",{staticClass:"fon8a"},[t._v(t._s(t.reservationData.tripType))])]),e(i["a"],{attrs:{xs12:"","pt-3":"","text-left":""}},[e("span",{staticClass:"font8"},[t._v("Members : ")]),e("span",{staticClass:"fon8a"},[t._v(" "+t._s(t.reservationData.noOfAdults)+" Adults, "+t._s(t.reservationData.noOfChildren)+" Children")])]),e(i["a"],{attrs:{xs12:"","pt-3":"","text-left":""}},[e("span",{staticClass:"font8"},[t._v("Check In Date : ")]),e("span",{staticClass:"fon8a"},[t._v(" "+t._s(t.formattedDate(t.reservationData.startDate))+" ")])]),e(i["a"],{attrs:{xs12:"","pt-3":"","text-left":""}},[e("span",{staticClass:"font8"},[t._v("Check Out Date : ")]),e("span",{staticClass:"fon8a"},[t._v(" "+t._s(t.formattedDate(t.reservationData.endDate)))])]),t.reservationData.houseBoatId?e(i["a"],{attrs:{xs12:"","pt-3":"","text-left":""}},[e("span",{staticClass:"font8"},[t._v("Pickup/ Drop : ")]),t.reservationData.houseBoatId.startingLocation?e("span",{staticClass:"fon8a"},[t._v(" "+t._s(t.reservationData.houseBoatId.startingLocation.name))]):t._e()]):t._e(),e(i["a"],{attrs:{xs12:"","pt-3":"","text-left":""}},[e("span",{staticClass:"font8"},[t._v("Advance payed : ")]),e("span",{staticClass:"fon8a"},[t._v(" ₹ "+t._s(t.reservationData.advanceAmountPaid))])]),e(i["a"],{attrs:{xs12:"","pt-3":"","text-left":""}},[e("span",{staticClass:"font8"},[t._v("Balance Amount : ")]),e("span",{staticClass:"fon8a"},[t._v(" ₹ "+t._s(t.reservationData.balancePayAmount))])]),e(i["a"],{attrs:{xs12:"","pt-3":"","text-left":""}},[e("span",{staticClass:"font8"},[t._v("Total Amount : ")]),e("span",{staticClass:"fon8a"},[t._v(" ₹ "+t._s(t.reservationData.totalAmount))])]),e(i["a"],{attrs:{xs12:"","pt-3":"","text-left":""}},[e(o["a"])],1),e(i["a"],{staticClass:"LexendRegular",attrs:{xs12:"","pt-3":""}},[e(s["a"],{attrs:{tile:"",dark:"",block:"",color:"rgba(255, 98, 0, 1)"},on:{click:function(e){return t.reschedulenow()}}},[t._v("Reschedule Now")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)},u=[],g=(a("14d9"),a("cee4")),f={data(){return{appLoading:!1,ServerError:!1,showSnackbar:!1,msg:"",selectedDate:[],reservationData:[],reserveNo:"",disableddates:[],nowDate:(new Date).toISOString().slice(0,10),boatname:"",triptype:"",houseBoatType:"",boatCategory:"",noofrooms:"",noofguests:"",roomsrate:"",extrapersonrate:"",bookingMode:"",agentname:"",guestname:"",guestNumber:"",oldArr:[],finalarr:[],pickerDate:null,dateLength:"",advanceAmt:"",payableAmt:"",balancePayedBy:"",flag:!0}},watch:{selectedDate(){if(1===this.selectedDate.length){console.log("first selectedDate=",this.selectedDate),console.log("dateLength=",this.dateLength);const t=new Date(this.selectedDate[0]),e=new Date(t);e.setDate(t.getDate()+(this.dateLength-1)),this.selectedDate.push(e.toISOString().substr(0,10))}console.log("second date formed=",this.selectedDate),this.newfun()},triptype(){this.getData(this.pickerDate)}},async mounted(){await this.$nextTick();const t=this.$refs.datepicker.$el.querySelector('.v-btn[aria-label="Previous month"]');t.addEventListener("click",()=>{this.getData(this.pickerDate)});const e=this.$refs.datepicker.$el.querySelector('.v-btn[aria-label="Next month"]');e.addEventListener("click",()=>{this.getData(this.pickerDate)}),this.triptype="DayCruise",this.getRescheduleData(),this.boatname=this.$route.query.name;const a=new Date,s=a.getMonth()+1,n=a.getFullYear(),r=`${n}-${String(s).padStart(2,"0")}`;this.getData(r)},methods:{formattedDate(t){const e={day:"2-digit",month:"2-digit",year:"numeric"};return new Date(t).toLocaleDateString("en-GB",e)},newfun(){function t(t){const e=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getFullYear());return`${e}-${a}-${s}`}function e(e,a){const s=[],n=new Date(e);while(n<=new Date(a))s.push(t(n)),n.setDate(n.getDate()+1);return s}var a=[];if(new Date(this.selectedDate[0])<=new Date(this.selectedDate[1]))console.log("1"),a=e(this.selectedDate[0],this.selectedDate[1]);else{console.log("2"),a=e(this.selectedDate[1],this.selectedDate[0]),console.log("before-rearragedate==",this.selectedDate);var s=[this.selectedDate[1],this.selectedDate[0]];this.selectedDate=s,console.log("rearragedate==",s)}console.log("result befor checking disabled=",a),this.checkDisabledDates(a)},checkDisabledDates(t){function e(t){const e=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getFullYear());return`${e}-${a}-${s}`}const a=this.disableddates.map(t=>new Date(t)),s=a.map(t=>e(t)),n=s.filter(e=>t.includes(e));n.length>0?(this.showSnackbar=!0,this.msg="You cannot choose these dates"):(this.showSnackbar=!1,this.msg="",this.finalarr=t,console.log("finalarr formed is=",this.finalarr))},getData(t){this.appLoading=!0,Object(g["a"])({url:"/reschedule/houseboat/getdates",method:"POST",headers:{token:localStorage.getItem("token")},data:{bookingId:this.$route.query.id,month:t}}).then(t=>{this.appLoading=!1,this.disableddates=t.data.data}).catch(t=>{console.log(t)})},reschedulenow(){console.log("old arr=",this.oldArr[0]),console.log("final arr=",this.finalarr[0]),this.oldArr[0]===this.finalarr[0]?(this.msg="Cannot reschedule to same date",this.showSnackbar=!0):(console.log("qwertyu"),this.edit())},edit(){console.log("this.finalarr to submit=====",this.finalarr),this.appLoading=!0,Object(g["a"])({method:"POST",url:"/reschedule/houseboat",data:{startDate:this.finalarr[0],endDate:this.finalarr[this.finalarr.length-1],id:this.$route.query.id},headers:{token:localStorage.getItem("token")}}).then(t=>{this.appLoading=!1,t.data.status,this.msg=t.data.msg,this.showSnackbar=!0,this.getRescheduleData()})},filterAllowedDates(t){const e=new Date(t);return!this.disableddates.includes(this.formatDate(e))},formatDate(t){const e=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${e}-${a}-${s}`},getRescheduleData(){this.appLoading=!0,Object(g["a"])({url:"reschedule/houseboatbooking/details",method:"POST",headers:{token:localStorage.getItem("token")},data:{bookingId:this.$route.query.id}}).then(t=>{this.appLoading=!1,this.reservationData=t.data.data,this.oldArr=t.data.data.bookedDates.map(t=>{const e=new Date(t),a=`${e.getDate().toString().padStart(2,"0")}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getFullYear()}`;return a}),this.finalarr=t.data.data.bookedDates.map(t=>{const e=new Date(t),a=e.toISOString().slice(0,10);return a}),this.selectedDate=t.data.data.bookedDates.map(t=>{const e=new Date(t),a=e.toISOString().slice(0,10);return a}),this.dateLength=this.selectedDate.length,this.getData()}).catch(t=>{console.log(t)})}}},D=f,m=(a("1d71"),a("0c7c")),k=Object(m["a"])(D,p,u,!1,null,"3514a64b",null);e["default"]=k.exports}}]);
//# sourceMappingURL=chunk-a386a7fc.14e6d833.js.map